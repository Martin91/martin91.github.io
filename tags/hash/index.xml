<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Hash on Hackerpie</title><link>https://blog.hackerpie.com/tags/hash/</link><description>Recent content in Hash on Hackerpie</description><generator>Hugo</generator><language>zh-CN</language><lastBuildDate>Tue, 25 Mar 2014 20:05:00 +0800</lastBuildDate><atom:link href="https://blog.hackerpie.com/tags/hash/index.xml" rel="self" type="application/rss+xml"/><item><title>Ruby中Hash的7个日常使用范例</title><link>https://blog.hackerpie.com/posts/archive/rubyzhong-hashde-7ge-ri-chang-shi-yong-fan-li/</link><pubDate>Tue, 25 Mar 2014 20:05:00 +0800</pubDate><guid>https://blog.hackerpie.com/posts/archive/rubyzhong-hashde-7ge-ri-chang-shi-yong-fan-li/</guid><description>&lt;p>此文翻译自&lt;a href="http://blog.8thcolor.com/en/2014/03/7-daily-use-cases-of-ruby-hash/?utm_source=rubyweekly&amp;amp;utm_medium=email#json-to-hash">7 daily use cases of Ruby Hash&lt;/a>，限于本人水平，翻译不当之处，敬请指教！&lt;/p>
&lt;p>每一天，你都需要跟Hash相处。创建一个新的Hash或者是通过它的某一个键去检索其中的元素这样的工作，都是常见也是非常简单的。但是当你需要合并两个嵌套的Hash或者是从某一个Hash里边过滤某些键，你可能需要考虑得多一点。通过完整的&lt;a href="http://ruby-doc.org/">文档&lt;/a>，你可以找到对Hash中的每一个方法的充分解释。但是由于文档不是面向应用场景的，你可能没法很快找到你的解决方案。在下面，我分享了我日常中经常遇到的Hash中的7个常用场景，希望它们对你有用。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="1-如何将一个json转换为一个hash">1. 如何将一个JSON转换为一个Hash？&lt;/h2>
&lt;p>假设你刚刚接收到一个用JSON表示的Twitter账号的资料信息：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="">data&lt;/span> &lt;span style="">=&lt;/span> &lt;span style="">&amp;#39;&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="font-style:italic">&amp;#34;Aaron Patterson&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-weight:bold">&amp;#34;screen_name&amp;#34;&lt;/span>: &lt;span style="font-style:italic">&amp;#34;tenderlove&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-weight:bold">&amp;#34;location&amp;#34;&lt;/span>: &lt;span style="font-style:italic">&amp;#34;Seattle, WA&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;span style="">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>你希望能够将它转化为一个Hash,这样会更方便你进行对数据的操作：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ruby" data-lang="ruby">&lt;span style="display:flex;">&lt;span>require &lt;span style="font-style:italic">&amp;#39;json&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>profile = JSON.parse(data)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>** 在IRB中的输出结果：**&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ruby" data-lang="ruby">&lt;span style="display:flex;">&lt;span>=&amp;gt; {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-style:italic">&amp;#34;name&amp;#34;&lt;/span>=&amp;gt;&lt;span style="font-style:italic">&amp;#34;Aaron Patterson&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-style:italic">&amp;#34;screen_name&amp;#34;&lt;/span>=&amp;gt;&lt;span style="font-style:italic">&amp;#34;tenderlove&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-style:italic">&amp;#34;location&amp;#34;&lt;/span>=&amp;gt;&lt;span style="font-style:italic">&amp;#34;Seattle, WA&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>查看文档：&lt;a href="http://www.ruby-doc.org/stdlib-2.1.0/libdoc/json/rdoc/JSON.html#method-i-parse">JSON#parse&lt;/a>&lt;/p>
&lt;h2 id="2-如何将一个hash转换为一个json">2. 如何将一个Hash转换为一个JSON？&lt;/h2>
&lt;p>在你的web应用程序中，你需要追踪当前星期每一天新注册用户的数量：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ruby" data-lang="ruby">&lt;span style="display:flex;">&lt;span>signups_of_the_week = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-style:italic">monday&lt;/span>: 2,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-style:italic">tuesday&lt;/span>: 3,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-style:italic">wednesday&lt;/span>: 4,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-style:italic">thursday&lt;/span>: 20,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-style:italic">friday&lt;/span>: 5,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-style:italic">saturday&lt;/span>: 2,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="font-style:italic">sunday&lt;/span>: 5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>你可以通过API的方式把它们以JSON格式提供给客户端：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ruby" data-lang="ruby">&lt;span style="display:flex;">&lt;span>require &lt;span style="font-style:italic">&amp;#39;json&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>signups_of_the_week.to_json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>** 在IRB中的输出结果：**&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ruby" data-lang="ruby">&lt;span style="display:flex;">&lt;span>=&amp;gt; &lt;span style="font-style:italic">&amp;#34;{&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">monday&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">:2,&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">tuesday&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">:3,&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">wednesday&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">:4,&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">thursday&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">:20,&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">friday&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">:5,&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">saturday&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">:2,&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">sunday&lt;/span>&lt;span style="font-weight:bold;font-style:italic">\&amp;#34;&lt;/span>&lt;span style="font-style:italic">:5}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>查看文档：&lt;a href="http://www.ruby-doc.org/stdlib-2.1.0/libdoc/json/rdoc/JSON.html#method-i-generate">JSON#generate&lt;/a>
边注：&lt;a href="http://www.ruby-doc.org/stdlib-2.1.0/libdoc/json/rdoc/JSON.html#method-i-pretty_generate">JSON#pretty_generate&lt;/a>对于更好的打印以及调试非常有用。&lt;/p></description></item></channel></rss>
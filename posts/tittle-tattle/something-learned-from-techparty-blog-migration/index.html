<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta name=HandheldFriendly content="True">
<meta name=MobileOptimized content="320">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="从一个人肉搬迁博客的工作中得到的一点感悟，关于程序化或者脚本是不是最优解的一些想法">
<meta name=baidu-site-verification content="code-O73IxgKIB2">
<title>
瞎聊：避免手握锤子看啥都是钉子
</title>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"瞎聊：避免手握锤子看啥都是钉子","datePublished":"2022-01-12T11:24:20\u002b08:00"}</script>
<style>.hljs-comment,.hljs-quote{color:#8e908c}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c82829}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5871f}.hljs-attribute{color:#eab700}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#718c00}.hljs-section,.hljs-title{color:#4271ae}.hljs-keyword,.hljs-selector-tag{color:#8959a8}.hljs{display:block;overflow-x:auto;background:#fff;color:#4d4d4c;padding:.5em}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style>
<link rel=canonical href=https://blog.hackerpie.com/posts/tittle-tattle/something-learned-from-techparty-blog-migration/>
<style>*{border:0;font:inherit;font-size:100%;vertical-align:baseline;margin:0;padding:0;color:#000;text-decoration-skip:ink}body{font-family:open sans,myriad pro,Myriad,sans-serif;font-size:17px;line-height:160%;color:#1d1313;max-width:1000px;margin:auto}p{margin:20px 0;letter-spacing:1pt}table{border-collapse:collapse;border-spacing:0}table th,td{border-bottom:1px solid #d3d3d3;padding:5px}table th{font-weight:700}a img{border:none}img{margin:10px auto;max-width:100%;display:block}.left-justify{float:left}.right-justify{float:right}pre,code{font:12px Consolas,liberation mono,Menlo,Courier,monospace;background-color:#f7f7f7}code{font-size:12px;padding:4px}pre{margin-top:0;margin-bottom:16px;word-wrap:normal;padding:16px;overflow:auto;font-size:85%;line-height:1.45}pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}pre code{display:inline;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}pre code::before,pre code::after{content:normal}em,q,em,dfn{font-style:italic}.sans,html .gist .gist-file .gist-meta{font-family:open sans,myriad pro,Myriad,sans-serif}.mono,pre,code,tt,p code,li code{font-family:Menlo,Monaco,andale mono,lucida console,courier new,monospace}.section-title{font-family:fangsong,old standard tt,serif}.heading,.serif,h1,h2,h3{font-family:old standard tt,serif}strong{font-weight:600}q:before{content:"\201C"}q:after{content:"\201D"}del,s{text-decoration:line-through}blockquote{font-family:old standard tt,serif;text-align:center;padding:50px}blockquote p{display:inline-block;font-style:italic}blockquote:before,blockquote:after{font-family:old standard tt,serif;content:'\201C';font-size:35px;color:#403c3b}blockquote:after{content:'\201D'}hr{width:40%;height:1px;background:#403c3b;margin:25px auto}h1{font-size:35px}h2{font-size:28px}h3{font-size:22px;margin-top:18px}h1 a,h2 a,h3 a{text-decoration:none}h1,h2{margin-top:28px}#sub-header,.date{color:#403c3b;font-size:13px}#sub-header{margin:0 4px}#nav h1 a{font-size:35px;color:#1d1313;line-height:120%}.posts_listing a,#nav a{text-decoration:none}li{margin-left:20px}ul li{margin-left:5px}ul li{list-style-type:none}ul li:before{content:"\00BB \0020"}#nav ul li:before,.posts_listing li:before{content:'';margin-right:0}#content{text-align:left;width:100%;font-size:15px;padding:60px 0 80px}#content h1,#content h2{margin-bottom:5px}#content h2{font-size:25px}#content .entry-content{margin-top:15px}#content .date{margin-left:3px}#content h1{font-size:30px}.highlight{margin:10px 0}.posts_listing{margin:0 0 50px}.posts_listing li{margin:0 0 25px 15px}.posts_listing li a:hover,#nav a:hover{text-decoration:underline}#nav{text-align:center;position:static;margin-top:60px}#nav ul{display:table;margin:8px auto 0}#nav li{list-style-type:none;display:table-cell;font-size:15px;padding:0 20px}#links{display:flex;justify-content:space-between;margin:50px 0 0}#links :nth-child(1){margin-right:.5em}#links :nth-child(2){margin-left:.5em}#not-found{text-align:center}#not-found a{font-family:old standard tt,serif;font-size:200px;text-decoration:none;display:inline-block;padding-top:225px}@media(max-width:750px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:28px}#nav li{font-size:13px;padding:0 15px}#content{margin-top:0;padding-top:50px;font-size:14px}#content h1{font-size:25px}#content h2{font-size:22px}.posts_listing li div{font-size:12px}}@media(max-width:400px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:22px}#nav li{font-size:16px;padding:0 10px}#content{margin-top:0;padding-top:20px;font-size:16px}#content h1{font-size:22px}#content h2{font-size:20px}#content h3{font-size:18px}.posts_listing li div{font-size:12px}}@media(prefers-color-scheme:dark){*,#nav h1 a{color:#fdfdfd}body{background:#121212}pre,code{background-color:#262626}#sub-header,.date{color:#bababa}hr{background:#ebebeb}}</style>
<script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?288e2eb770bdfc3ef2b333b7d845fb2a",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script>
</head>
<body>
<section id=nav>
<h1 id=site-title><a href=https://blog.hackerpie.com/>Hackerpie</a></h1>
<h3>成长，折腾，保持单纯</h3>
<ul>
</ul>
</section>
<section id=content>
<h1 class=section-title> 瞎聊：避免手握锤子看啥都是钉子 </h1>
<div id=sub-header>
12/Jan/2022 · 1 minute read
</div>
<div id=toc class="well col-md-4 col-sm-6">
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#尝试-python--selenium>尝试 python + selenium</a></li>
<li><a href=#人肉复制粘贴>人肉复制粘贴</a></li>
<li><a href=#最终结果人肉操作完成用时-2-个小时出头>最终结果：人肉操作完成，用时 2 个小时出头</a></li>
</ul>
</li>
<li><a href=#最后的感悟>最后的感悟</a></li>
</ul>
</nav>
</div>
<div class=entry-content>
<p>前两天在给 <a href=http://techparty.org/>TechParty</a> 设计和制作新的官网，选型了<a href=http://www.sxl.cn/>上线了</a>作为网站设计和托管的平台。最后的一个大活就是如何将 TechParty 原来的 218 篇博客文章迁移到新的官网上，一站式管理。比较遗憾的是，上线了的博客系统并没有提供编程接口用于迁移已有博客，所以唯一的方式就是自行想办法将所有文章逐一拷贝到他们的富文本编辑器中。</p>
<p>TechParty 旧的博客系统是用的 Jekyll，一种主要使用 markdown 作为协作语言的静态博客站点生成工具，而上线了只支持富文本编辑器，也不支持 markdown，所以大体思路就是直接拷贝 Jekyll 生成好的 TechParty 博客的网页内容到上线了的编辑器中。但是问题是，这里面可是有 218 篇文章呢！不是一个小的工作量，所以作为程序员，第一反应就是尝试能不能将这个过程自动化？</p>
<h3 id=尝试-python--selenium>尝试 python + selenium</h3>
<p>第一个尝试的方案就是基于 Python + Selenium 的方式来实现整个过程的自动化。整个方案花了一下午大概4个小时的时间，包括解决 pip 依赖安装的问题、如何模拟鼠标长按选中博客文章正文的操作、如何模拟复制、如何模拟人工在上线了编辑器里点击和编辑等，最终整个方案因为无法完美模拟人工点击上线了的各个编辑框（为了进入编辑态，非编辑态时，页面上的各个控件显示为普通的文本）而失败……</p>
<h3 id=人肉复制粘贴>人肉复制粘贴</h3>
<p>第二天早上，痛定思痛，觉得自动化的路子虽然看起来比较聪明，但是实际上还有一些缺点或者未知问题：</p>
<ul>
<li>可复用性低：因为这种从 Jekyll 博客到上线了博客迁移的需求显然对我自己是一次性的任务，而对于别人可能压根没有什么需求</li>
<li>未知的异常处理：哪怕我解决了交互模拟的问题，我还是无法预知脚本后续自动执行的过程中还会不会有其他问题需要解决，尽管脚本自动化很酷，但是干过的人都知道，它不是一劳永逸的事情，往往你还是需要人盯着，以备随时介入处理突发的情况，而且一旦修复完问题，你还需要脚本到底是从头再来，还是断点作业，问题只多不少，无穷无尽……</li>
</ul>
<p>在决定是否改用人工方式之前，我算了道简单的数学题：</p>
<ul>
<li>迁移一篇文章的主要操作是：打开原文链接 -> 复制原文标题 -> 在上线了新建一篇博客 -> 粘贴标题 -> 回到原文复制原文发布时间 -> 粘贴到上线了的文章中 -> 复制原文正文 -> 粘贴到上线了的编辑器中 -> 点击上线了的“上线”按钮。如此往复就可以把所有文章都复制完。</li>
<li>以上一篇文章的复制操作，我大致觉得 60 秒绝对足够了，事实上对于熟练操作之后应该不需要这么长的时间</li>
<li>所以理论上复制所有文章需要的时间是： <code>218 x 60 = 13080 秒 = 218 分钟 = 3 小时 38 分钟</code></li>
<li>而更加合理一点的是按照每个文章 30 秒，那总体的时间就是减半的，也就是 <code>1 小时 49 分钟</code></li>
</ul>
<p>很有意思，当我想的是我需要完成 <code>218</code> 篇文章的搬迁的时候，我主观上觉得这是一个人肉操作难以短时间内完成的任务，至少可能要一整天都在干这个事情，除非用程序来自动完成。但是通过分解和评估，事实上不管是3个多小时还是2个小时，我都觉得这时间是要比写代码和调试程序的时间短的，而且结果可控的多：我很确定这是一个纯粹的时间问题，只要无脑操作，一定时间后，这个事情一定会完成，不用担心过程还有没有大的问题。</p>
<h3 id=最终结果人肉操作完成用时-2-个小时出头>最终结果：人肉操作完成，用时 2 个小时出头</h3>
<p>因为我希望这个事情无论如何，都要尽快完成，所以我用最笨也是最确定的方法：人肉复制粘贴。从 9:45 左右开始，到 12:05 左右完成，中间也处理少量的比如上线了网页崩溃必须刷新之类的问题，如果是继续用原来的脚本的方式，想必这类问题因为还要修改和调试代码会让我抓狂，但是人是最灵活的，所以我人肉操作的话都是顺便的事。尽管顺利完成，但是过程其实很痛苦：特别枯燥乏味，重复的操作多了之后，特别容易犯困。我是一边听着比较嗨的音乐一边抖腿才坚持弄完的。</p>
<h2 id=最后的感悟>最后的感悟</h2>
<p>这个事情其实很琐碎，但是对我自己挺大感触，记录一下：</p>
<ol>
<li><strong>不要拿着锤子看啥都是钉子，你可能需要一把起子</strong>：作为程序员，可能习惯于用专业的视角来处理生活中的事情，什么都想要以编程的形式来解决，但是适用性是有前提的：针对问题的程序有很大的复用的价值，比如事情是重复执行的，或者，这个方案可以移植到其他类似的事情上，否则，最笨的方法反而更有效，所以不要排斥那些看起来太笨不够酷的方法，可能它们反倒是最有效的；</li>
<li><strong>失败也可以有所得，只是可能性价比低</strong>：失败了的方案只是一种探索，可以发掘未知，比如我第一次知道了 selenium 的 action chains 可以用来模拟鼠标和键盘操作，这种发现和经验是可以复用的，长期来看可能是有价值的，只是当下对完成任务没有什么帮助</li>
<li><strong>量化分析，帮助自己绕开情感陷阱</strong>：如果一开始我能够直接计算一下人肉操作的时间成本的话，我很可能就不会去尝试其他方案了，因为显然这种本方法确定性高，我早点完成它，我就早点可以投入到其他有价值的事情上，我可以做时间的主人，而不是把时间当成赌注，赌自动化的方案能成功，并且一切顺利；</li>
<li><strong>把令人畏惧的大目标拆成给我信心的小目标</strong>：人肉复制的过程中，我刻意不去关注目前剩余的总的文章数量，这是为了避免给自己造成压力，只专注于眼下某一块的任务就好，告诉自己，只要慢慢完成每一个块就好了。所以往往我们盯着一个很大的目标的时候，我们很容易泄气，但是如果把它拆解成一个个比较小的我们有信心完成的小目标时，我们反倒容易保持专注，最终完成。</li>
</ol>
<p>我个人最喜欢的两个感悟就是 1 和 3。</p>
</div>
<div id=links>
<a href=https://blog.hackerpie.com/posts/skills/double-input-method/>&#171;&nbsp;我的刻意练习——双拼输入</a>
</div>
</section>
</body>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js></script>
<script>hljs.highlightAll()</script>
</html>
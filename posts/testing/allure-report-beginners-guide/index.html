<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A getting started introducing about schema of Allure Report Tool to beginners"><meta name=baidu-site-verification content="code-O73IxgKIB2"><title>Introducing the Schema of Allure Report Tool
</title><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Introducing the Schema of Allure Report Tool","datePublished":"2022-12-18T21:03:20\u002b08:00"}</script><style>.hljs-comment,.hljs-quote{color:#8e908c}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c82829}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5871f}.hljs-attribute{color:#eab700}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#718c00}.hljs-section,.hljs-title{color:#4271ae}.hljs-keyword,.hljs-selector-tag{color:#8959a8}.hljs{display:block;overflow-x:auto;background:#fff;color:#4d4d4c;padding:.5em}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><link rel=canonical href=https://blog.hackerpie.com/posts/testing/allure-report-beginners-guide/><style>*{border:0;font:inherit;font-size:100%;vertical-align:baseline;margin:0;padding:0;color:#000;text-decoration-skip:ink}body{font-family:open sans,myriad pro,Myriad,sans-serif;font-size:17px;line-height:160%;color:#1d1313;max-width:1000px;margin:auto}p{margin:20px 0;letter-spacing:1pt}table{border-collapse:collapse;border-spacing:0}table th,td{border-bottom:1px solid #d3d3d3;padding:5px}table th{font-weight:700}a img{border:none}img{margin:10px auto;max-width:100%;display:block}.left-justify{float:left}.right-justify{float:right}pre,code{font:12px Consolas,liberation mono,Menlo,Courier,monospace;background-color:#f7f7f7}code{font-size:12px;padding:4px}pre{margin-top:0;margin-bottom:16px;word-wrap:normal;padding:16px;overflow:auto;font-size:85%;line-height:1.45}pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}pre code{display:inline;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}pre code::before,pre code::after{content:normal}em,q,em,dfn{font-style:italic}.sans,html .gist .gist-file .gist-meta{font-family:open sans,myriad pro,Myriad,sans-serif}.mono,pre,code,tt,p code,li code{font-family:Menlo,Monaco,andale mono,lucida console,courier new,monospace}.section-title{font-family:fangsong,old standard tt,serif}.heading,.serif,h1,h2,h3{font-family:old standard tt,serif}figcaption{text-align:center;color:gray;font-size:90%;font-style:italic}strong{font-weight:600}q:before{content:"\201C"}q:after{content:"\201D"}del,s{text-decoration:line-through}blockquote{font-family:old standard tt,serif;text-align:center;padding:50px}blockquote p{display:inline-block;font-style:italic}blockquote:before,blockquote:after{font-family:old standard tt,serif;content:'\201C';font-size:35px;color:#403c3b}blockquote:after{content:'\201D'}hr{width:40%;height:1px;background:#403c3b;margin:25px auto}h1{font-size:35px}h2{font-size:28px}h3{font-size:22px;margin-top:18px}h1 a,h2 a,h3 a{text-decoration:none}h1,h2{margin-top:28px}#sub-header,.date{color:#403c3b;font-size:13px}#sub-header{margin:0 4px}#nav h1 a{font-size:35px;color:#1d1313;line-height:120%}.posts_listing a,#nav a{text-decoration:none}li{margin-left:20px}ul li{margin-left:5px}ul li{list-style-type:none}ul li:before{content:"\00BB \0020"}#nav ul li:before,.posts_listing li:before{content:'';margin-right:0}#content{text-align:left;width:100%;font-size:15px;padding:60px 0 80px}#content h1,#content h2{margin-bottom:5px}#content h2{font-size:25px}#content .entry-content{margin-top:15px}#content .date{margin-left:3px}#content h1{font-size:30px}.highlight{margin:10px 0}.posts_listing{margin:0 0 50px}.posts_listing li{margin:0 0 25px 15px}.posts_listing li a:hover,#nav a:hover{text-decoration:underline}#nav{text-align:center;position:static;margin-top:60px}#nav ul{display:table;margin:8px auto 0}#nav li{list-style-type:none;display:table-cell;font-size:15px;padding:0 20px}#links{display:flex;justify-content:space-between;margin:50px 0 0}#links :nth-child(1){margin-right:.5em}#links :nth-child(2){margin-left:.5em}#not-found{text-align:center}#not-found a{font-family:old standard tt,serif;font-size:200px;text-decoration:none;display:inline-block;padding-top:225px}@media(max-width:750px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:28px}#nav li{font-size:13px;padding:0 15px}#content{margin-top:0;padding-top:50px;font-size:14px}#content h1{font-size:25px}#content h2{font-size:22px}.posts_listing li div{font-size:12px}}@media(max-width:400px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:22px}#nav li{font-size:16px;padding:0 10px}#content{margin-top:0;padding-top:20px;font-size:16px}#content h1{font-size:22px}#content h2{font-size:20px}#content h3{font-size:18px}.posts_listing li div{font-size:12px}}@media(prefers-color-scheme:dark){*,#nav h1 a{color:#fdfdfd}body{background:#121212}pre,code{background-color:#262626}#sub-header,.date{color:#bababa}hr{background:#ebebeb}}</style><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?288e2eb770bdfc3ef2b333b7d845fb2a",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><section id=nav><h1 id=site-title><a href=https://blog.hackerpie.com/>HackerPie</a></h1><h3>成长，折腾，保持单纯</h3><ul></ul></section><section id=content><h1 class=section-title>Introducing the Schema of Allure Report Tool</h1><div id=sub-header>18/Dec/2022 · 4 minute read</div><div id=toc class="well col-md-4 col-sm-6"><nav id=TableOfContents><ul><li><a href=#a-detailed-demo>A Detailed Demo</a></li></ul></nav></div><div class=entry-content><h1 id=background>Background</h1><p>In October, I claimed an issue on the company&rsquo;s internal open source collaboration project. The task was to implement a test report visualization tool for the internal test framework. Because the display effect of Allure is really good, but there is no official detailed description of the underlying schema, so there are some gropings in the implementation process, and it is recorded here, hope it can help someone who may encounter similar problems.</p><h1 id=what-is-allure-report>What is Allure Report?</h1><p><a href=https://qameta.io/allure-report/>Allure</a>，the full name of which is Allure Report，is a cross programming languages test report tool. The framework provides multiple adapters and bindings in different languages with the underlying and standard schema. It currently supports Java, JavaScript, Python, Ruby, PHP, Kotlin, .Net, and Go。</p><p>Allure is capable to generate clean test reports, which consist of Overview, Categories, Suites, Graphs, Timeline, Behaviors and Packages pages, you can visit <a href=https://allure-framework.github.io/allure-demo>Allure demo</a> to see the official demo. If you wanna view more different examples, please visit <a href=http://betty.us.es/restest-showcase-demo/>RESTest showcase</a>.</p><p><figure><img src=https://blog.hackerpie.com/images/posts/allure/Allure_Report.png alt><figcaption>allure demo</figcaption></figure></p><p>Additionally, Allure supports multiple locales，currently, the official project supports 12 languages, including English and Chinese。</p><p>Allure implements the whole ecosystem based on different programming languages.</p><p><figure><img src=https://blog.hackerpie.com/images/posts/allure/Allure-architecture.jpg alt><figcaption>allure architecture</figcaption></figure></p><h1 id=allure-schema>Allure Schema</h1><p>Thanks to the JSON-based and language-independent schema, Allure implements the standard in different languages. For example, you can visit <a href=https://github.com/allure-framework/allure-python/blob/master/allure-python-commons/src/model2.py>allure-python-commons/src/model2.py</a> to view a Python version.</p><p>However, the official team doesn&rsquo;t provide detailed document about how to use the schema, so it is hard to understand how will the schema affects the final report. By trying and debugging, I have summarized the diagram to show all models and the relationships among them.</p><p><figure><img src=https://blog.hackerpie.com/images/posts/allure/Allure-models.jpg alt><figcaption>allure models</figcaption></figure></p><h2 id=a-detailed-demo>A Detailed Demo</h2><p>For references between the schema and the final report, you can start from the below codes which is a basic allure test case:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;test_shell_testcase_failed32&#34;</span>,  <span style=font-style:italic>// The name of the test case
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>    <span style=font-style:italic>&#34;status&#34;</span>: <span style=font-style:italic>&#34;failed&#34;</span>, <span style=font-style:italic>// the result of the test case，its enumerations are defined by the `Status`
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>    <span style=font-style:italic>&#34;steps&#34;</span>: [ <span style=font-style:italic>// The steps of the test，they are shown in the section &#34;Test body&#34; in the report
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;#@ 测试步骤:17:&#34;</span>,
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;status&#34;</span>: <span style=font-style:italic>&#34;passed&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;#@ 测试步骤:28:&#34;</span>,
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;status&#34;</span>: <span style=font-style:italic>&#34;passed&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;#@ 测试步骤:39:&#34;</span>,
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;status&#34;</span>: <span style=font-style:italic>&#34;passed&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;start&#34;</span>: <span style=font-style:italic>&#34;1665562034999&#34;</span>,  <span style=font-style:italic>// The beginning time of the test case
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>    <span style=font-style:italic>&#34;stop&#34;</span>: <span style=font-style:italic>&#34;1665562053613&#34;</span>,   <span style=font-style:italic>// The ending time of the test case，it is used to calculate the elapsed time with the beginning time，for instance, it is 18s 614ms here
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>    <span style=font-style:italic>&#34;uuid&#34;</span>: <span style=font-style:italic>&#34;test_python_testcase-result-37&#34;</span>, <span style=font-style:italic>// uuid，it should be generated by official libraries
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>    <span style=font-style:italic>&#34;testCaseId&#34;</span>: <span style=font-style:italic>&#34;20220411-152848-724647399&#34;</span>, <span style=font-style:italic>// it should be generated by official libraries, too
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>    <span style=font-style:italic>&#34;labels&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;suite&#34;</span>,  <span style=font-style:italic>// suite means it is a special label，its value is used to represent the suite name of cases
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>            <span style=font-style:italic>&#34;value&#34;</span>: <span style=font-style:italic>&#34;tst_suite_common2&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;tag&#34;</span>,  <span style=font-style:italic>// normal labels, labels are listed in the details of the test case report
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>            <span style=font-style:italic>&#34;value&#34;</span>: <span style=font-style:italic>&#34;feature&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;tag&#34;</span>,
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;value&#34;</span>: <span style=font-style:italic>&#34;medium priority&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;tag&#34;</span>,
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;value&#34;</span>: <span style=font-style:italic>&#34;level:3&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;tag&#34;</span>,
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;value&#34;</span>: <span style=font-style:italic>&#34;type:feature&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>the below shows the report corresponding to the above schema：<figure><img src=https://blog.hackerpie.com/images/posts/allure/Allure-report-example.png alt><figcaption>allure case report</figcaption></figure></p><h1 id=how-to-generate-allure-schema-by-official-libraries>How to generate Allure schema by official libraries?</h1><p>Assume you are using Python，you can use <a href=https://github.com/allure-framework/allure-python/blob/master/allure-python-commons/src/logger.py><code>AllureFileLogger</code></a>, which is a module in <code>allure-python-commons</code> official library.</p><p>The belows shows a simple example：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>from</span> <span style=font-weight:700>allure_commons.logger</span> <span style=font-weight:700>import</span> AllureFileLogger
</span></span><span style=display:flex><span><span style=font-weight:700>from</span> <span style=font-weight:700>allure_commons.model2</span> <span style=font-weight:700>import</span> TestResult, Status, Label, Link
</span></span><span style=display:flex><span><span style=font-weight:700>from</span> <span style=font-weight:700>allure_commons.types</span> <span style=font-weight:700>import</span> LinkType
</span></span><span style=display:flex><span><span style=font-weight:700>from</span> <span style=font-weight:700>allure_commons.utils</span> <span style=font-weight:700>import</span> now, uuid4
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>if</span> __name__ == <span style=font-style:italic>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    logger = AllureFileLogger(report_dir=<span style=font-style:italic>&#34;tmp/logger_reports/&#34;</span>)
</span></span><span style=display:flex><span>    result = TestResult(
</span></span><span style=display:flex><span>        name=<span style=font-style:italic>&#34;test case&#34;</span>,
</span></span><span style=display:flex><span>        status=Status.PASSED,
</span></span><span style=display:flex><span>        <span style=font-style:italic># statusDetails=&#34;test passed&#34;,</span>
</span></span><span style=display:flex><span>        stage=<span style=font-style:italic>&#34;local test&#34;</span>,
</span></span><span style=display:flex><span>        description=<span style=font-style:italic>&#34;simulation test&#34;</span>,
</span></span><span style=display:flex><span>        descriptionHtml=<span style=font-style:italic>&#34;&lt;h1&gt;simulation test&lt;/h1&gt;&#34;</span>,
</span></span><span style=display:flex><span>        start=now()-3000,
</span></span><span style=display:flex><span>        stop=now(),
</span></span><span style=display:flex><span>        uuid=uuid4(),
</span></span><span style=display:flex><span>        historyId=uuid4(),
</span></span><span style=display:flex><span>        testCaseId=uuid4(),
</span></span><span style=display:flex><span>        fullName=<span style=font-style:italic>&#34;a fake test case demo&#34;</span>,
</span></span><span style=display:flex><span>        labels=[Label(name=<span style=font-style:italic>&#34;owner&#34;</span>, value=<span style=font-style:italic>&#34;martinhong&#34;</span>), Label(name=<span style=font-style:italic>&#34;weight&#34;</span>, value=<span style=font-style:italic>&#34;highest&#34;</span>)],
</span></span><span style=display:flex><span>        links=[Link(type=LinkType.ISSUE,url=<span style=font-style:italic>&#34;https://google.com.hk&#34;</span>,name=<span style=font-style:italic>&#34;fake link&#34;</span>)])
</span></span><span style=display:flex><span>    logger.report_result(result)
</span></span></code></pre></div><p>It can generates the below schema:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;test case&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;status&#34;</span>: <span style=font-style:italic>&#34;passed&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;stage&#34;</span>: <span style=font-style:italic>&#34;local test&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;description&#34;</span>: <span style=font-style:italic>&#34;simulation test&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;descriptionHtml&#34;</span>: <span style=font-style:italic>&#34;&lt;h1&gt;simulation test&lt;/h1&gt;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;start&#34;</span>: 1664635107494,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;stop&#34;</span>: 1664635110494,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;uuid&#34;</span>: <span style=font-style:italic>&#34;083c72da-668c-406c-a258-ba61f2eec2f2&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;historyId&#34;</span>: <span style=font-style:italic>&#34;c665bc04-9b63-426f-a7ce-b1981853d775&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;testCaseId&#34;</span>: <span style=font-style:italic>&#34;2b53d7b0-2127-46ab-8c72-ec2e5c97b759&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;fullName&#34;</span>: <span style=font-style:italic>&#34;a fake test case demo&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;labels&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;owner&#34;</span>,
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;value&#34;</span>: <span style=font-style:italic>&#34;martinhong&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;weight&#34;</span>,
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;value&#34;</span>: <span style=font-style:italic>&#34;highest&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=font-style:italic>&#34;links&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;type&#34;</span>: <span style=font-style:italic>&#34;issue&#34;</span>,
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;url&#34;</span>: <span style=font-style:italic>&#34;https://google.com.hk&#34;</span>,
</span></span><span style=display:flex><span>            <span style=font-style:italic>&#34;name&#34;</span>: <span style=font-style:italic>&#34;fake link&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Its corresponding report is：<figure><img src=https://blog.hackerpie.com/images/posts/allure/Allure_simple_case.png alt><figcaption>allure simple case</figcaption></figure></p><h1 id=references>References</h1><ul><li><a href=https://qameta.io/allure-report/>Allure Report</a></li></ul></div><div id=links><a href=https://blog.hackerpie.com/posts/testing/allure-report-beginners-guide-chinese/>&#171;&nbsp;Allure 测试报告可视化工具入门</a>
<a href=https://blog.hackerpie.com/posts/algorithms/greedy/split_arrays/>贪心算法：数组拆分 LeetCode 561&nbsp;&#187;</a></div></section></body><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js></script><script>hljs.highlightAll()</script><script src=https://cdn.jsdelivr.net/gh/jmnote/plantuml-encoder@1.2.4/dist/plantuml-encoder.min.js integrity="sha256-Qsk2KRBCN5qVZX7B+8+2IvQl1Aqc723qV1tBCQaVoqo=" crossorigin=anonymous></script><script>(function(){let e="language-plantuml";Array.prototype.forEach.call(document.querySelectorAll("[class^="+e+"]"),function(e){let t=document.createElement("IMG");t.loading="lazy",t.src="http://www.plantuml.com/plantuml/svg/~1"+plantumlEncoder.encode(e.innerText),e.parentNode.insertBefore(t,e),e.style.display="none"})})()</script></html>